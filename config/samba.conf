# Samba配置文件 - 树莓派数据收集系统
# 位置: /etc/samba/smb.conf

[global]
    # 服务器基本信息
    workgroup = WORKGROUP
    server string = Raspberry Pi Data Collector
    netbios name = RASPI-DATA
    
    # 安全设置
    security = user
    map to guest = bad user
    guest account = nobody
    
    # 网络设置
    interfaces = lo eth0 wlan0
    bind interfaces only = yes
    
    # 日志设置
    log file = /var/log/samba/log.%m
    max log size = 1000
    log level = 1
    
    # 性能优化
    socket options = TCP_NODELAY IPTOS_LOWDELAY SO_RCVBUF=131072 SO_SNDBUF=131072
    read raw = yes
    write raw = yes
    max xmit = 65535
    dead time = 15
    getwd cache = yes
    
    # 字符编码
    unix charset = UTF-8
    dos charset = CP936

# 数据共享目录 - 只读访问
[data-readonly]
    comment = Data Collection Files (Read Only)
    path = /home/pi/data
    browseable = yes
    read only = yes
    guest ok = yes
    create mask = 0644
    directory mask = 0755
    force user = pi
    force group = pi

# 数据共享目录 - 读写访问（需要认证）
[data-readwrite]
    comment = Data Collection Files (Read Write)
    path = /home/pi/data
    browseable = yes
    read only = no
    guest ok = no
    valid users = pi, datauser
    create mask = 0664
    directory mask = 0775
    force user = pi
    force group = pi
    
# 提交数据目录 - 只读
[submissions]
    comment = Submitted Data Files
    path = /home/pi/data/submissions
    browseable = yes
    read only = yes
    guest ok = yes
    create mask = 0644
    directory mask = 0755
    force user = pi
    force group = pi

# 上传文件目录 - 只读
[uploads]
    comment = Uploaded Files
    path = /home/pi/data/uploads
    browseable = yes
    read only = yes
    guest ok = yes
    create mask = 0644
    directory mask = 0755
    force user = pi
    force group = pi

# 系统日志目录 - 管理员访问
[logs]
    comment = System Logs (Admin Only)
    path = /home/pi/data/logs
    browseable = no
    read only = yes
    guest ok = no
    valid users = pi
    create mask = 0644
    directory mask = 0755
    force user = pi
    force group = pi
